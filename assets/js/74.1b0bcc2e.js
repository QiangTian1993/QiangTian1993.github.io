(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{606:function(o,s,e){"use strict";e.r(s);var t=e(4),a=Object(t.a)({},(function(){var o=this,s=o.$createElement,e=o._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[e("h1",{attrs:{id:"cookie-与-session"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-与-session"}},[o._v("#")]),o._v(" Cookie 与 Session")]),o._v(" "),e("h2",{attrs:{id:"cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[o._v("#")]),o._v(" Cookie")]),o._v(" "),e("h3",{attrs:{id:"什么是-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是-cookie"}},[o._v("#")]),o._v(" 什么是 Cookie")]),o._v(" "),e("blockquote",[e("p",[o._v("Cookie 是服务器保存在客户端的一段文本信息,一般不会超过 4kb")])]),o._v(" "),e("ol",[e("li",[o._v("服务器通过 Set-Cookie 头给客户端一段字符串")]),o._v(" "),e("li",[o._v("客户端每次访问相同域名的网页时，必须带上这段字符串")]),o._v(" "),e("li",[o._v("客户端要在一段时间内保存这个 Cookie")]),o._v(" "),e("li",[o._v("Cookie 默认在用户关闭页面后就会失效，但是后端可以任意设置 Cookie 的有效时间")])]),o._v(" "),e("h3",{attrs:{id:"如何设置-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何设置-cookie"}},[o._v("#")]),o._v(" 如何设置 Cookie")]),o._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[o._v("Set"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("-")]),o._v("Cookie"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v(":")]),o._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("<")]),o._v("cookie名"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v(">=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("<")]),o._v("cookie值"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v(">")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v(" Max"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("-")]),o._v("Age"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[o._v("99999")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v(" Domain"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("=")]),o._v("baidu"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(".")]),o._v("com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v(" Path"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("/")]),o._v("docs"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("/")]),o._v("web"),e("span",{pre:!0,attrs:{class:"token operator"}},[o._v("/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v(" HttpOnly"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v(" Secure\n")])]),o._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[o._v("1")]),e("br")])]),e("p",[o._v("Cookie 包含以下几方面信息:")]),o._v(" "),e("ul",[e("li",[o._v("Cookie 名")]),o._v(" "),e("li",[o._v("Cookie 的值（数据）")]),o._v(" "),e("li",[o._v("到期时间:\n"),e("code",[o._v("Expires=Wed, 21 Oct 2015 07:28:00 GMT")]),o._v(" 过期日期 "),e("code",[o._v("Max-age=999")]),o._v(" 存活时间")]),o._v(" "),e("li",[o._v("所属域名:\n"),e("code",[o._v("Domain=baidu.com")])]),o._v(" "),e("li",[o._v("生效的路径\n"),e("code",[o._v("Path=/docs/web/")])]),o._v(" "),e("li",[o._v("HttpOnly 属性可以让 Cookie 无法通过 js 脚本拿到")]),o._v(" "),e("li",[o._v("Secure 属性指定这段 Cookie 只能在 https 协议下才能被传送到服务端")])]),o._v(" "),e("h3",{attrs:{id:"cookie-的缺陷"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-的缺陷"}},[o._v("#")]),o._v(" Cookie 的缺陷")]),o._v(" "),e("ul",[e("li",[o._v("因为每次请求都会发送 Cookie，所以无形中"),e("code",[o._v("增加了流量")])]),o._v(" "),e("li",[o._v("因为 HTTP 是明文传输，所以 Cookie 放在 HTTP 请求中是"),e("code",[o._v("不安全的")]),o._v("，除非用 HTTPS")]),o._v(" "),e("li",[o._v("Cookie 的大小一般只有 4kb 左右，存储"),e("code",[o._v("空间太小")]),o._v("了")])]),o._v(" "),e("h3",{attrs:{id:"cookie-的使用场合"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-的使用场合"}},[o._v("#")]),o._v(" Cookie 的使用场合")]),o._v(" "),e("ul",[e("li",[e("code",[o._v("对话管理")]),o._v("：保存用户登录信息、购物车等需要的信息")]),o._v(" "),e("li",[e("code",[o._v("个性化")]),o._v("：保存用户偏好，如字体大小，背景色等")]),o._v(" "),e("li",[e("code",[o._v("追踪")]),o._v("：记录分析用户行为")])]),o._v(" "),e("h2",{attrs:{id:"session"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[o._v("#")]),o._v(" Session")]),o._v(" "),e("h3",{attrs:{id:"什么是-session"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是-session"}},[o._v("#")]),o._v(" 什么是 Session")]),o._v(" "),e("blockquote",[e("p",[o._v("Session 是存在服务器中的一个文件")])]),o._v(" "),e("ol",[e("li",[e("code",[o._v("SessionId")]),o._v("（随机数）通过 Cookie 发送给客户端")]),o._v(" "),e("li",[o._v("客户端访问服务器时，会带上这个 SessinId，服务器读取 SessionId")]),o._v(" "),e("li",[o._v("服务器上有一块内存（哈希表）保存了 保存了所有用户的信息（id、email……）")]),o._v(" "),e("li",[o._v("这块内存就是 Session")]),o._v(" "),e("li",[o._v("服务器通过 SessionID 就可以得到相对应的 Session")])]),o._v(" "),e("p",[o._v("服务器通过 Cookie 分配给用户一个 SessionId, SessionId 对应服务器里面的一小块内存，每次用户访问服务器的时候，服务器就通过 SessionId 去读取对应的 Session ，这样服务器就能知道用户的信息")]),o._v(" "),e("h2",{attrs:{id:"session-与-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#session-与-cookie"}},[o._v("#")]),o._v(" Session 与 Cookie")]),o._v(" "),e("ul",[e("li",[o._v("一般来说 Session 是基于 Cookie 来实现的")]),o._v(" "),e("li",[o._v("Cookie 是保存在客户端的，每次发送请求都会带上 Cookie")]),o._v(" "),e("li",[o._v("Session 是保存在服务器的内存中的，其 SessionID 是通过 Cookie 发送给客户端的")])]),o._v(" "),e("h2",{attrs:{id:"cookie-隔离"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie-隔离"}},[o._v("#")]),o._v(" Cookie 隔离")]),o._v(" "),e("p",[o._v("cookie 隔离简单说就是让请求不携带 cookie。如果所有请求都携带 cookie 是非常消耗流量的，所以需要对一些非必要的请求进行 cookie 隔离，如静态文件等。\n我们知道 cookie 是有是在顶级相同的情况下才会携带，所以可以将需要 cookie 隔离的资源放在其他域名下")])])}),[],!1,null,null,null);s.default=a.exports}}]);